(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[109],{2263:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(1),l=a.n(r),c=a(1187),i=a(1416),o=a.n(i),s=a(1737),m=a(7),u=a(1118),d=a(562),p=a(1186),f=a(1216),b=a(1319),E=a(1266),v=a(113),h=a(36),g=a(1512),N=a(1335),x=a(1213),O=a(1156),w=a(49),y=a(117),j=a(1155),_=a(4),I=a(78),C=a(61),k=a.n(C),S=a(101),T=a(21),A=a.n(T),L=function(e,t){switch(t.type){case"LOAD_NOTIFICATIONS":case"DELETE_NOTIFICATION":case"CLEAR_NOTIFICATIONS":return Object(m.a)(Object(m.a)({},e),{},{notifications:t.payload});default:return Object(m.a)({},e)}},R=Object(r.createContext)({notifications:[],deleteNotification:function(){},clearNotifications:function(){},getNotifications:function(){},createNotification:function(){}}),z=function(e){e.settings;var t=e.children,a=Object(r.useReducer)(L,[]),n=Object(h.a)(a,2),c=n[0],i=n[1],o=function(){var e=Object(S.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/api/notification/delete",{id:t});case 3:a=e.sent,i({type:"DELETE_NOTIFICATION",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/api/notification/delete-all");case 3:t=e.sent,i({type:"CLEAR_NOTIFICATIONS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("/api/notification");case 3:t=e.sent,i({type:"LOAD_NOTIFICATIONS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(S.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/api/notification/add",{notification:t});case 3:a=e.sent,i({type:"CREATE_NOTIFICATION",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){m()}),[]),l.a.createElement(R.Provider,{value:{notifications:c.notifications,deleteNotification:o,clearNotifications:s,getNotifications:m,createNotification:u}},t)},F=R,D=function(){return Object(r.useContext)(F)},M=Object(j.a)((function(e){e.palette,Object(n.a)(e,["palette"]);return{notification:{width:"var(--sidenav-width)","& .notification__topbar":{height:"var(--topbar-height)"}},notificationCard:{"&:hover":{"& .delete-button":{cursor:"pointer",display:"unset",right:0,marginTop:6,top:0,zIndex:2},"& .card__topbar__time":{display:"none"}},"& .delete-button":{display:"none",position:"absolute",right:0,marginTop:9},"& .card__topbar__button":{borderRadius:15,opacity:.9}}}})),P=function(e){var t=e.container,a=l.a.useState(!1),n=Object(h.a)(a,2),i=n[0],o=n[1],s=M(),m=Object(I.a)().settings,u=D(),f=u.deleteNotification,b=u.clearNotifications,E=u.notifications,v=function(){o(!i)};return l.a.createElement(r.Fragment,null,l.a.createElement(d.a,{onClick:v},l.a.createElement(g.a,{color:"secondary",badgeContent:null===E||void 0===E?void 0:E.length},l.a.createElement(p.a,null,"notifications"))),l.a.createElement(c.a,{theme:m.themes[m.activeTheme]},l.a.createElement(N.a,{width:"100px",container:t,variant:"temporary",anchor:"right",open:i,onClose:v,ModalProps:{keepMounted:!0}},l.a.createElement("div",{className:s.notification},l.a.createElement("div",{className:"notification__topbar elevation-z6 flex items-center p-4 mb-4"},l.a.createElement(p.a,{color:"primary"},"notifications"),l.a.createElement("h5",{className:"ml-2 my-0 font-medium"},"Notifications")),null===E||void 0===E?void 0:E.map((function(e){return l.a.createElement("div",{key:e.id,className:Object(_.default)("relative",s.notificationCard)},l.a.createElement(d.a,{size:"small",className:"delete-button bg-light-gray mr-6",onClick:function(){return f(e.id)}},l.a.createElement(p.a,{className:"text-muted",fontSize:"small"},"clear")),l.a.createElement(w.a,{to:"/".concat(e.path),onClick:v},l.a.createElement(x.a,{className:"mx-4 mb-6",elevation:3},l.a.createElement("div",{className:"card__topbar flex items-center justify-between p-2 bg-light-gray"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement("div",{className:"card__topbar__button flex items-center justify-between h-24 w-24 overflow-hidden"},l.a.createElement(p.a,{className:"card__topbar__icon",fontSize:"small",color:e.icon.color},e.icon.name)),l.a.createElement("span",{className:"ml-4 font-medium text-muted"},e.heading)),l.a.createElement("small",{className:"card__topbar__time text-muted"},Object(y.d)(new Date(e.timestamp))," ","ago")),l.a.createElement("div",{className:"px-4 pt-2 pb-4"},l.a.createElement("p",{className:"m-0"},e.title),l.a.createElement("small",{className:"text-muted"},e.subtitle)))))})),!!(null===E||void 0===E?void 0:E.length)&&l.a.createElement("div",{className:"text-center"},l.a.createElement(O.a,{onClick:b},"Clear Notifications"))))))},W=a(1658),H=a(50),J=a(102),B=Object(j.a)((function(e){var t=e.palette,a=Object(n.a)(e,["palette"]);return{topbar:{top:0,zIndex:96,transition:"all 0.3s ease",background:"linear-gradient(180deg, rgba(255, 255, 255, 0.95) 44%, rgba(247, 247, 247, 0.4) 50%, rgba(255, 255, 255, 0))","& .topbar-hold":{backgroundColor:t.primary.main,height:80,paddingLeft:18,paddingRight:20,[a.breakpoints.down("sm")]:{paddingLeft:16,paddingRight:16},[a.breakpoints.down("xs")]:{paddingLeft:14,paddingRight:16}},"& .fixed":{boxShadow:a.shadows[8],height:64}},userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}})),q=l.a.memo((function(){var e,t,a=Object(H.a)(),n=B(),r=Object(I.a)(),c=r.settings,i=r.updateSettings,o=Object(J.a)(),s=o.logout,h=o.user,g=Object(u.a)(a.breakpoints.down("md")),N=null===c||void 0===c||null===(e=c.layout1Settings)||void 0===e||null===(t=e.topbar)||void 0===t?void 0:t.fixed;return l.a.createElement("div",{className:n.topbar},l.a.createElement("div",{className:Object(_.default)({"topbar-hold":!0,fixed:N})},l.a.createElement("div",{className:"flex justify-between items-center h-full"},l.a.createElement("div",{className:"flex"},l.a.createElement(d.a,{onClick:function(){var e,t,a=c.layout1Settings;e=g?"close"===a.leftSidebar.mode?"mobile":"close":"full"===a.leftSidebar.mode?"close":"full",t={mode:e},i({layout1Settings:{leftSidebar:Object(m.a)({},t)}})},className:"hide-on-pc"},l.a.createElement(p.a,null,"menu")),l.a.createElement("div",{className:"hide-on-mobile"},l.a.createElement(d.a,null,l.a.createElement(p.a,null,"mail_outline")),l.a.createElement(d.a,null,l.a.createElement(p.a,null,"web_asset")),l.a.createElement(d.a,null,l.a.createElement(p.a,null,"star_outline")))),l.a.createElement("div",{className:"flex items-center"},l.a.createElement(v.p,null),l.a.createElement(z,null,l.a.createElement(P,null)),l.a.createElement(W.a,null),l.a.createElement(v.n,{menuButton:l.a.createElement("div",{className:n.userMenu},l.a.createElement(f.a,{xsDown:!0},l.a.createElement("span",null,"Hi ",l.a.createElement("strong",null,h.name))),l.a.createElement(b.a,{className:"cursor-pointer",src:h.avatar}))},l.a.createElement(E.a,null,l.a.createElement(w.a,{className:n.menuItem,to:"/"},l.a.createElement(p.a,null," home "),l.a.createElement("span",{className:"pl-4"}," Home "))),l.a.createElement(E.a,null,l.a.createElement(w.a,{className:n.menuItem,to:"/page-layouts/user-profile"},l.a.createElement(p.a,null," person "),l.a.createElement("span",{className:"pl-4"}," Profile "))),l.a.createElement(E.a,{className:n.menuItem},l.a.createElement(p.a,null," settings "),l.a.createElement("span",{className:"pl-4"}," Settings ")),l.a.createElement(E.a,{onClick:s,className:n.menuItem},l.a.createElement(p.a,null," power_settings_new "),l.a.createElement("span",{className:"pl-4"}," Logout ")))))))})),G=a(1740),K=a(1735),Q=a(1739),U=a(151),V=a(1736),X=Object(j.a)((function(e){e.palette,Object(n.a)(e,["palette"]);return{contentWrap:function(e){return{verticalAlign:"top",marginLeft:e.width,transition:"all 0.3s ease",marginRight:e.secondarySidebar.open?50:0}},topbar:{top:0,zIndex:96,background:"linear-gradient(180deg, rgba(255, 255, 255, 0.95) 44%, rgba(247, 247, 247, 0.4) 50%, rgba(255, 255, 255, 0))",transition:"all 0.3s ease"}}}));t.default=l.a.memo((function(){var e=Object(I.a)().settings,t=e.layout1Settings,a=e.secondarySidebar,n=t.leftSidebar,i=n.mode,m=n.show,u=Object(r.useContext)(U.a).routes,d=function(){switch(i){case"full":return"var(--sidenav-width)";case"compact":return"var(--sidenav-compact-width)";default:return"0px"}}(),p=X({width:d,secondarySidebar:a}),f=Object(H.a)(),b=e.themes[t.topbar.theme],E="theme-".concat(f.palette.type," flex");return l.a.createElement("div",{className:Object(_.default)("bg-default",E)},m&&"close"!==i&&l.a.createElement(V.a,null,l.a.createElement(G.a,null)),l.a.createElement("div",{className:Object(_.default)("flex-grow flex-column relative overflow-hidden h-full-screen",p.contentWrap)},t.topbar.show&&t.topbar.fixed&&l.a.createElement(c.a,{theme:b},l.a.createElement(q,{fixed:!0,className:"elevation-z8"})),e.perfectScrollbar&&l.a.createElement(o.a,{className:"flex-grow flex-column relative h-full"},t.topbar.show&&!t.topbar.fixed&&l.a.createElement(c.a,{theme:b},l.a.createElement(q,null)),l.a.createElement("div",{className:"relative flex-grow"},l.a.createElement(v.t,null,Object(s.a)(u))),e.footer.show&&!e.footer.fixed&&l.a.createElement(K.a,null)),!e.perfectScrollbar&&l.a.createElement("div",{className:"flex-grow flex-column relative h-full scroll-y"},t.topbar.show&&!t.topbar.fixed&&l.a.createElement(c.a,{theme:b},l.a.createElement(q,null)),l.a.createElement("div",{className:"relative flex-grow"},l.a.createElement(v.t,null,Object(s.a)(u))),e.footer.show&&!e.footer.fixed&&l.a.createElement(K.a,null)),e.footer.show&&e.footer.fixed&&l.a.createElement(K.a,null)),e.secondarySidebar.show&&l.a.createElement(Q.a,null))}))}}]);