(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[78],{1581:function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"d",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return s})),t.d(a,"e",(function(){return m}));var l=t(21),n=t.n(l),r=function(){return n.a.get("/api/invoices/all")},c=function(e){return n.a.get("/api/invoices",{data:e})},i=function(e){return n.a.post("/api/invoices/delete",e)},s=function(e){return n.a.post("/api/invoices/add",e)},m=function(e){return n.a.post("/api/invoices/update",e)}},2273:function(e,a,t){"use strict";t.r(a);var l=t(36),n=t(1),r=t.n(n),c=t(1213),i=t(7),s=t(17),m=t(562),u=t(1186),o=t(1156),d=t(1271),E=t(1251),b=t(1252),p=t(1253),f=t(1297),v=t(1254),N=t(42),g=t(49),h=t(1581),O=t(2188),j=t(1155),y=t(4),x=Object(j.a)((function(e){e.palette,Object(s.a)(e,["palette"]);return{"@global":{"@media print":{"body, *, html":{visibility:"hidden"},"#print-area":{position:"fixed",top:0,left:0,right:0,height:"100%","& *":{visibility:"visible"}}}},invoiceViewer:{"& h5":{fontSize:15}}}})),w=function(e){var a=e.toggleInvoiceEditor,t=Object(n.useState)({}),s=Object(l.a)(t,2),j=s[0],w=s[1],C=Object(N.i)().id,M=x();Object(n.useEffect)((function(){"add"!==C&&Object(h.d)(C).then((function(e){w(Object(i.a)({},e.data))}))}),[C]);var q=0,T=j.orderNo,V=j.buyer,I=j.seller,z=j.item,S=void 0===z?[]:z,k=j.status,P=j.vat,W=j.date;return r.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",M.invoiceViewer)},r.a.createElement("div",{className:"viewer_actions px-4 mb-5 flex items-center justify-between"},r.a.createElement(g.a,{to:"/invoice/list"},r.a.createElement(m.a,null,r.a.createElement(u.a,null,"arrow_back"))),r.a.createElement("div",null,r.a.createElement(o.a,{className:"mr-4 py-2",variant:"contained",color:"primary",onClick:function(){return a()}},"Edit Invoice"),r.a.createElement(o.a,{onClick:function(){return window.print()},className:"py-2",variant:"contained",color:"secondary"},"Print Invoice"))),r.a.createElement("div",{id:"print-area"},r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Order Info"),r.a.createElement("p",{className:"mb-4"},"Order Number"),r.a.createElement("p",{className:"mb-0"},"# ",T)),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal mb-4 capitalize"},r.a.createElement("strong",null,"Order status:")," ",k),r.a.createElement("h5",{className:"font-normal capitalize"},r.a.createElement("strong",null,"Order date: ")," ",r.a.createElement("span",null,W?Object(O.a)(new Date(W).getTime(),"MMMM dd, yyyy"):"")))),r.a.createElement(d.a,null),r.a.createElement("div",{className:"viewer__billing-info px-4 py-5 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Bill From"),r.a.createElement("p",{className:"mb-4"},I?I.name:null),r.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},I?I.address:null)),r.a.createElement("div",{className:"text-right w-full"},r.a.createElement("h5",{className:"mb-2"},"Bill To"),r.a.createElement("p",{className:"mb-4"},V?V.name:null),r.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},V?V.address:null)),r.a.createElement("div",null)),r.a.createElement(c.a,{className:"mb-4",elevation:0},r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{className:"pl-sm-24"},"#"),r.a.createElement(f.a,{className:"px-0"},"Item Name"),r.a.createElement(f.a,{className:"px-0"},"Unit Price"),r.a.createElement(f.a,{className:"px-0"},"Unit"),r.a.createElement(f.a,{className:"px-0"},"Cost"))),r.a.createElement(v.a,null,S.map((function(e,a){return q+=e.unit*e.price,r.a.createElement(p.a,{key:a},r.a.createElement(f.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.name),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.price),r.a.createElement(f.a,{className:"pl-0 capitalize"},e.unit),r.a.createElement(f.a,{className:"pl-0"},e.unit*e.price))}))))),r.a.createElement("div",{className:"px-4 flex justify-end"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"pr-12"},r.a.createElement("p",{className:"mb-4"},"Sub Total:"),r.a.createElement("p",{className:"mb-4"},"Vat(%):"),r.a.createElement("strong",null,r.a.createElement("p",null,"Grand Total:"))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-4"},q),r.a.createElement("p",{className:"mb-4"},P),r.a.createElement("p",null,r.a.createElement("strong",null,"$",q+=q*P/100)))))))},C=t(15),M=t(563),q=t(1274),T=t(1157),V=t(1402),I=t(1212),z=t(65),S=t(1400),k=t(1524),P=t(1482),W=Object(j.a)((function(e){e.palette,Object(s.a)(e,["palette"]);return{invoiceEditor:{"& h5":{fontSize:15}}}})),_={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1},B=function(e){var a=e.isNewInvoice,t=e.toggleInvoiceEditor,c=Object(n.useState)(!0),s=Object(l.a)(c,2),m=s[0],u=s[1],g=Object(n.useState)(_),O=Object(l.a)(g,2),j=O[0],x=O[1],w=Object(N.g)(),B=Object(N.i)().id,D=W(),U=Object(n.useCallback)((function(){var e=Math.random().toString(),a=e.substr(2,e.length-1);x((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:a})}))}),[]),A=function(e){e.persist(),x(Object(i.a)(Object(i.a)({},j),{},{[e.target.name]:e.target.value}))},F=function(e,a){e.persist(),x(Object(i.a)(Object(i.a)({},j),{},{[a]:Object(i.a)(Object(i.a)({},j[a]),{},{[e.target.name]:e.target.value})}))},G=function(e,a){var t=Object(C.a)(j.item);t.map((function(t,l){return a===l&&(t[e.target.name]=e.target.value),t})),x(Object(i.a)(Object(i.a)({},j),{},{item:t}))};Object(n.useEffect)((function(){a?U():Object(h.d)(B).then((function(e){var a=e.data;m&&x(Object(i.a)({},a))}))}),[B,a,m,U]),Object(n.useEffect)((function(){return function(){return u(!1)}}),[]);var J=0,K=j.orderNo,$=j.buyer,H=j.seller,L=j.item,Q=void 0===L?[]:L,R=j.status,X=j.vat,Y=j.date,Z=j.currency,ee=j.loading;return r.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",D.invoiceEditor)},r.a.createElement(z.ValidatorForm,{onSubmit:function(){x(Object(i.a)(Object(i.a)({},j),{},{loading:!0}));var e=Object(i.a)({},j);delete e.loading,a?Object(h.a)(e).then((function(){x(Object(i.a)(Object(i.a)({},j),{},{loading:!1})),w.push("/invoice/".concat(j.id)),t()})):Object(h.e)(e).then((function(){x(Object(i.a)(Object(i.a)({},j),{},{loading:!1})),t()}))},onError:function(e){return null}},r.a.createElement("div",{className:"viewer_actions px-4 flex justify-end"},r.a.createElement("div",{className:"mb-6"},r.a.createElement(o.a,{type:"button",className:"mr-4 py-2",variant:"text",onClick:function(){return t()}},"Cancel"),r.a.createElement(o.a,{type:"submit",className:"py-2",variant:"contained",color:"primary",disabled:ee},"Save"))),r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Order Info"),r.a.createElement("p",{className:"mb-4"},"Order Number"),r.a.createElement(z.TextValidator,{label:"Order No.",type:"text",fullWidth:!0,name:"orderNo",value:K,onChange:A,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement("div",null,r.a.createElement(M.a,{component:"fieldset",className:"w-full mb-4"},r.a.createElement(q.a,{"aria-label":"status",name:"status",value:R,onChange:A},r.a.createElement(T.a,{className:"h-32",value:"pending",control:r.a.createElement(V.a,{color:"secondary"}),label:"Pending",labelPlacement:"start"}),r.a.createElement(T.a,{className:"h-32",value:"processing",control:r.a.createElement(V.a,{color:"secondary"}),label:"Processing",labelPlacement:"start"}),r.a.createElement(T.a,{className:"h-32",value:"delivered",control:r.a.createElement(V.a,{color:"secondary"}),label:"Delivered",labelPlacement:"start"}))),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal"},r.a.createElement("strong",null,"Order date: "))),r.a.createElement(S.a,{utils:P.a},r.a.createElement(k.a,{margin:"none",id:"mui-pickers-date",label:"Order Date",inputVariant:"standard",type:"text",autoOk:!0,value:Y,fullWidth:!0,format:"MMMM dd, yyyy",onChange:function(e){x(Object(i.a)(Object(i.a)({},j),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement(d.a,null),r.a.createElement(I.a,{className:"px-4 py-5",container:!0,justify:"space-between",spacing:4},r.a.createElement(I.a,{item:!0},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-5 "},"Bill From"),r.a.createElement(z.TextValidator,{className:"mb-5",label:"Seller Name",onChange:function(e){return F(e,"seller")},type:"text",name:"name",fullWidth:!0,value:H?H.name:null,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement(z.TextValidator,{label:"Seller Name",type:"text",onChange:function(e){return F(e,"seller")},name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:H?H.address:null,validators:["required"],errorMessages:["this field is required"]}))),r.a.createElement(I.a,{item:!0},r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"mb-5"},"Bill To"),r.a.createElement(z.TextValidator,{className:"mb-5",label:"Buyer Name",onChange:function(e){return F(e,"buyer")},type:"text",name:"name",fullWidth:!0,value:$?$.name:null,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement(z.TextValidator,{label:"Buyer Address",onChange:function(e){return F(e,"buyer")},type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:$?$.address:null,validators:["required"],errorMessages:["this field is required"]})))),r.a.createElement(E.a,{className:"mb-4"},r.a.createElement(b.a,null,r.a.createElement(p.a,{className:"bg-default"},r.a.createElement(f.a,{className:"pl-sm-24"},"#"),r.a.createElement(f.a,{className:"px-0"},"Item Name"),r.a.createElement(f.a,{className:"px-0"},"Unit Price"),r.a.createElement(f.a,{className:"px-0"},"Unit"),r.a.createElement(f.a,{className:"px-0"},"Cost"),r.a.createElement(f.a,{className:"px-0"},"Action"))),r.a.createElement(v.a,null,Q.map((function(e,a){return J+=e.price*e.unit,r.a.createElement(p.a,{key:a},r.a.createElement(f.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(z.TextValidator,{label:"Item Name",onChange:function(e){return G(e,a)},type:"text",name:"name",fullWidth:!0,value:e?e.name:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(z.TextValidator,{label:"Item Price",onChange:function(e){return G(e,a)},type:"number",name:"price",fullWidth:!0,value:e?e.price:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(z.TextValidator,{label:"Item Unit",onChange:function(e){return G(e,a)},type:"number",name:"unit",fullWidth:!0,value:e?e.unit:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.unit*e.price),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(o.a,{onClick:function(){return function(e){var a=Object(C.a)(j.item);a.splice(e,1),x(Object(i.a)(Object(i.a)({},j),{},{item:a}))}(a)}},"Delete")))})))),r.a.createElement("div",{className:"flex justify-end px-4 mb-4"},r.a.createElement(o.a,{onClick:function(){var e=Object(C.a)(j.item);e.push({name:"",unit:"",price:""}),x(Object(i.a)(Object(i.a)({},j),{},{item:e}))}},"Add Item")),r.a.createElement("div",{className:"px-4 flex justify-end"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"pr-12"},r.a.createElement("p",{className:"mb-8"},"Sub Total:"),r.a.createElement("p",{className:"mb-12"},"Vat(%):"),r.a.createElement("p",{className:"mb-5"},"currency:"),r.a.createElement("strong",null,r.a.createElement("p",null,"Grand Total:"))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-4"},J),r.a.createElement(z.TextValidator,{className:"mb-4",label:"Vat",onChange:A,type:"number",name:"vat",value:X,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement("br",null),r.a.createElement(z.TextValidator,{label:"Currency",onChange:A,type:"text",name:"currency",value:Z,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement("p",{className:"mt-4"},r.a.createElement("strong",null,Z,J+J*X/100)))))))};a.default=function(){var e=Object(n.useState)(!1),a=Object(l.a)(e,2),t=a[0],i=a[1],s=Object(n.useState)(!1),m=Object(l.a)(s,2),u=m[0],o=m[1],d=Object(N.i)().id,E=function(){i(!t),o(!1)};return Object(n.useEffect)((function(){"add"===d&&(i(!0),o(!0))}),[d]),r.a.createElement(c.a,{elevation:6,className:"m-sm-30"},t?r.a.createElement(B,{toggleInvoiceEditor:E,isNewInvoice:u}):r.a.createElement(w,{toggleInvoiceEditor:E}))}}}]);